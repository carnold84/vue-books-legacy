webpackJsonp([1],{HoFL:function(t,e){},Iqae:function(t,e,i){"use strict";var o={name:"svgIcon",props:{basePath:{type:String,default:"/static"},name:{type:String,required:!0},size:{default:16}},computed:{svg:function(){return'<svg style="width: '+this.size+"px; height: "+this.size+'px"><use xlink:href="'+this.basePath+"/icons.svg#"+this.name+'"></use></svg>'}}},s={render:function(){var t=this.$createElement;return(this._self._c||t)("span",{staticClass:"icon",domProps:{innerHTML:this._s(this.svg)}})},staticRenderFns:[]},r=i("VU/8")(o,s,!1,function(t){i("UaEI")},"data-v-24ddb252",null);e.a=r.exports},JPFD:function(t,e){},MllK:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("7+uW"),s=i("8X8O"),r=i("mvHQ"),a=i.n(r),n=i("DlMc"),u=i.n(n),l={debug:!0,state:{books:[],booksById:{},authors:[],booksAuthors:[],series:[],booksSeries:[]},init:function(){this.debug&&console.log("init triggered");var t=localStorage.getItem("vue-books");t=null===t?{books:["1","2"],booksById:{1:{id:"1",title:"The Spy Who Read Me",bookNumber:"1"},2:{id:"2",title:"Harry Booker and the Editor's Stone",bookNumber:"1"}},authors:[{id:"1",firstName:"John",lastName:"Le Booker"},{id:"2",firstName:"J.K.",lastName:"Booking"}],booksAuthors:[{id:"1",book:"1",author:"1"},{id:"2",book:"2",author:"2"}],series:[{id:"1",title:"The Spy Catcher"},{id:"2",title:"The Harry Booker Chronicles"}],booksSeries:[{id:"1",book:"1",series:"1"},{id:"2",book:"2",series:"2"}]}:JSON.parse(t),this.updateStorage(t)},addBook:function(t){this.debug&&console.log("addBook triggered with",t);var e=this.state,i={id:t.id?t.id:u.a.v4(),title:t.title,bookNumber:t.bookNumber};if(e.booksById[i.id]=i,t.id){var o=e.books.indexOf(i.id);o?e.books.splice(o,1,[i.id]):console.error("Could not update ",i.title)}else e.books.push(i.id);if(t.series){var s=void 0;(s=this.getSeries(t))||(s=c(t),e.series.push(s)),e.booksSeries.push({id:u.a.v4(),book:i.id,series:s.id})}if(t.firstName||t.lastName){var r=this.getAuthor(t);if(!r){var a=d(t);r=a.id,e.authors.push(a)}e.booksAuthors.push({id:u.a.v4(),book:i.id,author:r})}this.updateStorage(e)},removeBook:function(t){this.debug&&console.log("removeBook triggered with",t);var e=this.state;e.books.splice(e.books.indexOf(t.id),1),delete e.booksById[t.id],e.booksAuthors=e.booksAuthors.filter(function(e){return e.book!==t.id}),this.updateStorage(e)},updateStorage:function(t){this.debug&&console.log("updateStorage triggered with",t),localStorage.setItem("vue-books",a()(t)),this.state=t},getAuthor:function(t){var e=void 0;return this.state.authors.forEach(function(i){i.firstName.toLowerCase()===t.firstName.toLowerCase()&&i.lastName.toLowerCase()===t.lastName.toLowerCase()&&(e=i.id)}),e},getSeries:function(t){var e=void 0;return this.state.series.forEach(function(i){i.title.toLowerCase()===t.series.toLowerCase()&&(e=i)}),e}},d=function(t){var e={id:u.a.v4()};return t.firstName&&(e.firstName=t.firstName),t.lastName&&(e.lastName=t.lastName),e},c=function(t){return{id:u.a.v4(),title:t.series}},h=l,m={name:"app",created:function(){h.init()}},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]},f=i("VU/8")(m,v,!1,function(t){i("l6U7")},null,null).exports,b=i("/ocq"),k=function(t,e,i){var o=[];i.forEach(function(e){e.book===t.id&&o.push(e.author)});var s=e.filter(function(t){return o.includes(t.id)}),r=[];return s&&s.forEach(function(t){r.push({id:t.id,firstName:t.firstName,lastName:t.lastName,url:"/author/"+t.id})}),r},p=function(t,e,i){var o=void 0,s=void 0;if(i.forEach(function(e){e.book===t.id&&(o=e.series)}),s=e.filter(function(t){return t.id===o}),s=s?s[0]:void 0)return{id:s.id,title:s.title,url:"/series/"+s.id}},_={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"header-bar"},[this._t("default")],2)},staticRenderFns:[]},g=i("VU/8")({name:"HeaderBar"},_,!1,function(t){i("ndDH")},"data-v-16446e74",null).exports,N={name:"ActionBar",props:{hasBorder:Boolean,default:!0}},B={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:{"action-bar":!0,"has-border":this.hasBorder}},[this._t("default")],2)},staticRenderFns:[]},C=i("VU/8")(N,B,!1,function(t){i("MllK")},"data-v-3029c842",null).exports,y={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"list"},[this._t("default")],2)},staticRenderFns:[]},S=i("VU/8")({name:"List"},y,!1,function(t){i("JPFD")},"data-v-bc83484c",null).exports,U={name:"UiButton",props:{isButton:{type:Boolean,default:!0},isPrimary:{type:Boolean,default:!1},onClick:{type:Function,default:null}}},x={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isButton?i("button",{class:{"ui-button":!0,"is-primary":t.isPrimary},on:{click:function(e){t.onClick&&t.onClick()}}},[t._t("default")],2):i("div",{class:{"ui-button":!0,"is-primary":t.isPrimary},on:{click:function(e){t.onClick&&t.onClick()}}},[t._t("default")],2)},staticRenderFns:[]},E=i("VU/8")(U,x,!1,function(t){i("HoFL")},"data-v-29d206a2",null).exports,L={name:"LinkButton",components:{UiButton:E},props:["to","isPrimary"]},R={render:function(){var t=this.$createElement,e=this._self._c||t;return e("router-link",{attrs:{to:this.to}},[e("ui-button",{attrs:{isButton:!1,isPrimary:this.isPrimary}},[this._t("default")],2)],1)},staticRenderFns:[]},A={name:"ListItem",components:{UiButton:E,LinkButton:i("VU/8")(L,R,!1,null,null,null).exports},props:{title:String,url:String,editUrl:String,authors:Array,series:Object,bookNumber:String,onRemove:Function},methods:{}},F={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"list-item"},[i("div",{staticClass:"cell"},[i("span",[t._v(t._s(t.title))])]),t._v(" "),i("div",{staticClass:"cell"},t._l(t.authors,function(e){return t.authors?i("router-link",{key:e.id,attrs:{to:e.url}},[i("span",{staticClass:"title-text"},[t._v(t._s(e.lastName+", "+e.firstName))])]):t._e()})),t._v(" "),i("div",{staticClass:"cell"},[t.series?i("router-link",{attrs:{to:t.series.url}},[i("span",{staticClass:"title-text"},[t._v(t._s(t.series.title))])]):t._e()],1),t._v(" "),i("div",{staticClass:"cell"},[t.bookNumber?i("span",[t._v(t._s("Book "+t.bookNumber))]):t._e()]),t._v(" "),i("div",{staticClass:"actions"},[i("link-button",{attrs:{to:t.editUrl}},[t._v("Edit")]),t._v(" "),i("ui-button",{attrs:{onClick:t.onRemove}},[t._v("Remove")])],1)])},staticRenderFns:[]},$={name:"ListItemContainer",props:["book","onRemove"],methods:{onRemoveClick:function(){this.onRemove(this.book)}},components:{ListItem:i("VU/8")(A,F,!1,function(t){i("TEf/")},"data-v-76018b54",null).exports}},V={render:function(){var t=this.$createElement;return(this._self._c||t)("list-item",{attrs:{title:this.book.title,url:this.book.url,editUrl:this.book.editUrl,authors:this.book.authors,series:this.book.series,bookNumber:this.book.bookNumber,onRemove:this.onRemoveClick}})},staticRenderFns:[]},w=i("VU/8")($,V,!1,null,null,null).exports,H=(i("VO7+"),{name:"Home",data:function(){return h.state},components:{HeaderBar:g,List:S,ListItemContainer:w,ActionBar:C},computed:{sortedBooks:function(){var t=this,e=void 0,i=void 0;"Authors"===this.$route.name?e=this.authors.find(function(e){return t.$route.params.name===e.id}):"Series"===this.$route.name&&(i=this.series.find(function(e){return t.$route.params.title===e.id}));var o=[];return this.books.forEach(function(s){var r=t.booksById[s],a={id:r.id,title:r.title,authors:k(r,t.authors,t.booksAuthors),series:p(r,t.series,t.booksSeries),bookNumber:r.bookNumber,url:t.getUrl(r),editUrl:t.getEditUrl(r)};if(e){a.authors.find(function(t){return t.id===e.id})&&o.push(a)}else i?a.series&&a.series.id===i.id&&o.push(a):o.push(a)}),o}},methods:{onRemove:function(t){h.removeBook(t)},getUrl:function(t){return"/book/"+t.id},getEditUrl:function(t){return"/edit-book/"+t.id}}}),I={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"home"}},[i("header-bar",[i("h1",[t._v("Vue Books")])]),t._v(" "),i("div",{staticClass:"content"},[i("action-bar",{attrs:{hasBorder:!1}},[i("div",{staticClass:"action-bar-content"},[i("h2",[t._v("Books")])]),t._v(" "),i("div",{staticClass:"action-bar-actions"},[i("router-link",{staticClass:"round-button",attrs:{to:"/add-book"}},[i("svgicon",{attrs:{name:"add",width:"20",height:"20"}})],1)],1)]),t._v(" "),i("list",t._l(t.sortedBooks,function(e){return i("list-item-container",{key:e.id,attrs:{book:e,onRemove:t.onRemove}})}))],1)],1)},staticRenderFns:[]},P=i("VU/8")(H,I,!1,function(t){i("oNLp")},"data-v-dd479ad0",null).exports,T=i("Uya5"),O=i.n(T),D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-field"},[e("label",{staticClass:"label",attrs:{for:this.name}},[this._v(this._s(this.label))]),this._v(" "),e("input",{staticClass:"input",attrs:{id:this.name,type:"text",name:this.name},domProps:{value:this.value}})])},staticRenderFns:[]},M={name:"EditBook",components:{HeaderBar:g,TextField:i("VU/8")({name:"TextField",props:["label","name","value"]},D,!1,function(t){i("ZLGX")},"data-v-33692efd",null).exports,UiButton:E},data:function(){return h.state},mounted:function(){document.querySelectorAll(".anim-section").forEach(function(t,e){t.style.transitionDelay=30*e+"ms"});document.querySelector("#edit-book").classList.add("show")},computed:{book:function(){var t={};if(this.$route.params.id){var e=this.booksById[this.$route.params.id],i=k(e,this.authors,this.booksAuthors),o=p(e,this.series,this.booksSeries);t={id:e.id,title:e.title,firstName:i?i[0].firstName:void 0,lastName:i?i[0].lastName:void 0,series:o?o.title:void 0,bookNumber:e.bookNumber}}return t}},methods:{onSubmit:function(t){var e=O()(t.target,{hash:!0});e.id=this.$route.params.id,h.addBook(e),this.$router.go(-1)}}},J={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"edit-book"}},[i("header-bar",[i("div",{staticClass:"header-content"},[i("router-link",{attrs:{to:"/"}},[t._v("Vue Books")]),t._v(" "),i("h2",[t._v("/ Add Book")])],1)]),t._v(" "),i("div",{staticClass:"content"},[i("form",{on:{submit:function(e){e.preventDefault(),t.onSubmit(e)}}},[i("div",{staticClass:"anim-section"},[i("text-field",{attrs:{label:"Title",name:"title",value:t.book.title}})],1),t._v(" "),i("div",{staticClass:"anim-section"},[i("text-field",{attrs:{label:"Author's First Name",name:"firstName",value:t.book.firstName}})],1),t._v(" "),i("div",{staticClass:"anim-section"},[i("text-field",{attrs:{label:"Author's Last Name",name:"lastName",value:t.book.lastName}})],1),t._v(" "),i("div",{staticClass:"anim-section"},[i("text-field",{attrs:{label:"Series",name:"series",value:t.book.series}})],1),t._v(" "),i("div",{staticClass:"anim-section"},[i("text-field",{attrs:{label:"Book Number",name:"bookNumber",value:t.book.bookNumber}})],1),t._v(" "),i("div",{staticClass:"buttons anim-section"},[i("ui-button",{attrs:{isPrimary:!0}},[t._v("Save Book")])],1)])])],1)},staticRenderFns:[]},q=i("VU/8")(M,J,!1,function(t){i("tsVl")},"data-v-03794744",null).exports;o.a.use(b.a);var z=new b.a({base:"/demo/",routes:[{path:"/",name:"Home",component:P},{path:"/author/:name",name:"Authors",component:P},{path:"/series/:title",name:"Series",component:P},{path:"/add-book",name:"AddBook",component:q},{path:"/edit-book/:id",name:"EditBook",component:q}]}),K=i("0QuU"),Q=i.n(K);o.a.use(Q.a),o.a.use(s.a,{basePath:"/static/svg"}),o.a.config.productionTip=!1,new o.a({el:"#app",router:z,template:"<App/>",components:{App:f}})},"TEf/":function(t,e){},UaEI:function(t,e){},"VO7+":function(t,e,i){i("0QuU").register({add:{width:24,height:24,viewBox:"0 0 24 24",data:'<path pid="0" d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>'}})},ZLGX:function(t,e){},l6U7:function(t,e){},ndDH:function(t,e){},oNLp:function(t,e){},tsVl:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.f27ce20bfd7b71a4a1fd.js.map